# Home Assistant - ÖBB Station Departure Board / Trip Planner

A custom card for Home Assistant to display ÖBB Scotty widget to show departures for a specific station or a trip planner.  
The card allows you to configure the widget flexibly to your needs via the official ÖBB widget generator (see installation intrstructions below).

<kbd>
  <img src="assets/o%CC%88bb_widget.png" width="500px" border-radius="12px" />
</kbd>
  
## Installation via HACS

[![Open your Home Assistant instance and open a repository inside the Home Assistant Community Store.](https://my.home-assistant.io/badges/hacs_repository.svg)](https://my.home-assistant.io/redirect/hacs_repository/?owner=IchordeDionysos&repository=home-assistant-oebb-widget&category=plugin)

_Or manually:_

1. Go to HACS.
2. Click the 3 dots in the top right corner -> **Custom repositories**.
3. Add this URL: `https://github.com/IchordeDionysos/home-assistant-oebb-departure-board`
4. Category: **Dashboard** (Select "Lovelace" if on older HACS versions).
5. Click **Add**.
6. Find the new card in the list and click **Download**.

## Usage
You need to first create the widget via the ÖBB configurator.

### Configure the widget: Example for a departure board

1. Go to: https://fahrplan.oebb.at/webapp/widgetgenerator.html
2. De-select "Trip Planner" & select "Departures". (You should now see a widget preview prompting you for a single station).
3. Select the language you want the widget to have, then continue to the next step.
4. Select the "Monitor" display mode, then continue to the next step.
5. Select the station you want departures for and optionally adjust the advanced settings, then continue to the next step.
6. On the last step, you'll be shown some code that we need to configure the dashboard, copy the one starting with `<div ...`.

### Adding the widget to a Home Assistant dashboard

1. Go to a dashboard and edit it.
2. Create a new widget on the dashboard and search for the "ÖBB widget" card.
3. Copy the following configuration into the text field (for widget copy use the generated widget configuration from the previous section).

```yaml
type: custom:oebb-widget
widget: <div data-hfs-widget="true" [... your widget configuration ...]></div>
language: en_GB # Or: de_DE, it_IT; Defaults to English
```

## Configuration Options

| Option | Type | Description |
|---|---|---|
| `widget` | string | **Required**. The HTML code generated by the ÖBB widget generator. |
| `language` | string | The language code for the widget (e.g., `en_GB`, `de_DE`). Defaults to `en_GB`. |
| `height` | string | Height of the card (e.g., `400px`). Defaults to `400px`. |
| `hide_caption` | boolean | Hides the caption text below the list. |
| `hide_stop_list_explanation` | boolean | Hides the explanation text list. |
| `hide_branding` | boolean | Hides the ÖBB branding/logo and removes top spacing. |
| `hide_header` | boolean | Hides the header bar. |
| `hide_date_headline` | boolean | Hides the date headline. |
| `font_url` | string | URL to a CSS file for custom fonts (e.g. from Google Fonts). |
| `font_family` | string | CSS `font-family` property to apply to the widget. |

### Styling Example (Custom Font & Clean Look)

```yaml
type: custom:oebb-widget
widget: "..."
hide_header: true
hide_branding: true
hide_caption: true
font_url: "https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap"
font_family: "'Montserrat', sans-serif"
```
